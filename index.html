<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>جاري التحويل...</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@500;700&display=swap" rel="stylesheet">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>

    <style>
        :root {
            --primary: #f59e0b;      /* لون التوهج */
            --bg-color: #fffdf5;     /* خلفية صفراء خافتة */
            --track-color: #e5e7eb;  /* لون المسار الرمادي */
            --text-color: #374151;
        }

        * {
            box-sizing: border-box;
        }

        body {
            margin: 0;
            padding: 0;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: var(--bg-color);
            font-family: 'Tajawal', sans-serif;
            overflow: hidden;
        }

        .container {
            text-align: center;
            position: relative;
        }

        /* تنسيق الدائرة والمؤقت */
        .timer-wrapper {
            position: relative;
            width: 140px;
            height: 140px;
            margin: 0 auto 25px;
        }

        .timer-svg {
            transform: rotate(-90deg); /* البدء من الأعلى */
            width: 100%;
            height: 100%;
        }

        .circle-bg {
            fill: none;
            stroke: var(--track-color);
            stroke-width: 6;
        }

        .circle-progress {
            fill: none;
            stroke: var(--primary);
            stroke-width: 6;
            stroke-linecap: round;
            stroke-dasharray: 1; /* لأننا سنستخدم pathLength=1 */
            stroke-dashoffset: 0;
            filter: drop-shadow(0 0 10px rgba(245, 158, 11, 0.6)); /* التوهج */
        }

        .count-display {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 3rem;
            font-weight: 700;
            color: var(--primary);
        }

        /* تنسيق النصوص */
        h1 {
            font-size: 1.6rem;
            color: var(--text-color);
            margin: 0;
            opacity: 0; /* للأنيميشن عند البدء */
            transform: translateY(10px);
        }

        .loading-dots::after {
            content: ' .';
            animation: dots 1.5s steps(5, end) infinite;
        }

        @keyframes dots {
            0%, 20% { content: ' .'; }
            40% { content: ' ..'; }
            60% { content: ' ...'; }
            80%, 100% { content: ''; }
        }
    </style>
</head>
<body>

    <div class="container">
        <div class="timer-wrapper">
            <svg class="timer-svg" viewBox="0 0 100 100">
                <circle class="circle-bg" cx="50" cy="50" r="45"></circle>
                <circle id="progressCircle" class="circle-progress" cx="50" cy="50" r="45" pathLength="1"></circle>
            </svg>
            <div id="counter" class="count-display">4</div>
        </div>
        <h1 id="message">جاري تحويلك لصفحة طلب المنتج<span class="loading-dots"></span></h1>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const redirectUrl = "https://damenkom-orders.com?id=df5204e0-1d01-4b96-a859-1fc9eabe0863";
            const duration = 4; // مدة العداد بالثواني
            
            const counterElement = document.getElementById("counter");
            const circleElement = document.getElementById("progressCircle");
            const messageElement = document.getElementById("message");

            // 1. إظهار النص بحركة ناعمة
            gsap.to(messageElement, {
                opacity: 1,
                y: 0,
                duration: 0.8,
                ease: "power2.out"
            });

            // 2. أنيميشن الدائرة (تفريغ الدائرة)
            gsap.fromTo(circleElement, 
                { strokeDashoffset: 0 },
                { 
                    strokeDashoffset: 1, 
                    duration: duration, 
                    ease: "linear" 
                }
            );

            // 3. منطق العداد الرقمي
            let timeLeft = duration;
            const timerInterval = setInterval(() => {
                timeLeft--;
                if (timeLeft >= 0) {
                    counterElement.innerText = timeLeft;
                }
            }, 1000);

            // 4. التحويل عند انتهاء الوقت
            gsap.delayedCall(duration, () => {
                clearInterval(timerInterval);
                window.location.replace(redirectUrl);
            });
        });
    </script>
</body>
</html>
